{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\SoftUni\\\\JS Web\\\\JS React\\\\MY FINAL PROJECT - REAL\\\\react-exam-brokers\\\\react-exam-brokers\\\\src\\\\components\\\\ShowOffers.js\";\nimport React, { Component } from \"react\"; // import OffersFilters from \"./OffersFilters\";\n// import TableOffers from \"./tableComponents/TableOffers\";\n// import Pagination from './tableComponents/Pagination'\n// import qs from \"querystring\";\n\nimport axios from 'axios';\nimport Pagination from \"./tableComponents/Pagination\";\nimport TableOffers from \"./tableComponents/TableOffers\";\nimport SearchButton from \"./SearchButton\";\nimport Spinner from './sharedComponents/Spinner'; // import db from \"./db/db\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ShowOffers extends Component {\n  constructor(props) {\n    super(props); // console.log(this.props);\n\n    this.getAll = async function (e) {\n      await axios.get('/allOffers').then(response => this.setState({\n        offers: response.data\n      })).catch(err => console.log(err));\n      this.setState({\n        loading: false\n      });\n    };\n\n    this.onChangeValueSearch = e => {\n      let currentSearch = e.target.value;\n      this.setState({\n        searchByNeighborhood: currentSearch\n      });\n    };\n\n    this.onSearch = e => {\n      e.preventDefault();\n      const currentNeighborhood = this.state.offers.filter(x => x.neighborhood.toLowerCase() === this.state.searchByNeighborhood.toLowerCase());\n\n      if (!this.state.searchByNeighborhood) {\n        // this.setState({offers: this.newDb})\n        axios.get('/allOffers').then(response => this.setState({\n          offers: response.data\n        })).catch(err => console.log(err));\n        return;\n      }\n\n      this.setState({\n        offers: currentNeighborhood\n      });\n      this.setState({\n        searchByNeighborhood: \"\"\n      }); // console.log(\"click search !!!\");\n      // console.log(this.state.searchByNeighborhood);\n    };\n\n    this.state = {\n      loading: true,\n      offers: [],\n      searchByNeighborhood: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.getAll();\n  }\n\n  componentDidMount() {\n    this.getAll();\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(SearchButton, {\n          type: \"text\",\n          label: \"\\u041A\\u0432\\u0430\\u0440\\u0442\\u0430\\u043B\",\n          placeholder: \"\\u041A\\u0432\\u0430\\u0440\\u0442\\u0430\\u043B\",\n          name: \"neighborhood\",\n          val: this.state.searchByNeighborhood,\n          onChange: this.onChangeValueSearch,\n          onSearch: this.onSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(TableOffers, {\n          offers: this.state.offers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Pagination, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, this);\n    }\n  }\n\n}\n\nexport default ShowOffers;","map":{"version":3,"sources":["C:/Users/user/Desktop/SoftUni/JS Web/JS React/MY FINAL PROJECT - REAL/react-exam-brokers/react-exam-brokers/src/components/ShowOffers.js"],"names":["React","Component","axios","Pagination","TableOffers","SearchButton","Spinner","ShowOffers","constructor","props","getAll","e","get","then","response","setState","offers","data","catch","err","console","log","loading","onChangeValueSearch","currentSearch","target","value","searchByNeighborhood","onSearch","preventDefault","currentNeighborhood","state","filter","x","neighborhood","toLowerCase","componentDidMount","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CACA;AACA;AACA;AACA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,OAAP,MAAoB,4BAApB,C,CACA;;;;AAEA,MAAMC,UAAN,SAAyBN,SAAzB,CAAmC;AACjCO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN,EADiB,CAEjB;;AAFiB,SAmBnBC,MAnBmB,GAmBV,gBAAeC,CAAf,EAAkB;AAE3B,YAAMT,KAAK,CAACU,GAAN,CAAU,YAAV,EACOC,IADP,CACYC,QAAQ,IAAI,KAAKC,QAAL,CAAc;AAACC,QAAAA,MAAM,EAAEF,QAAQ,CAACG;AAAlB,OAAd,CADxB,EAEOC,KAFP,CAEaC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFpB,CAAN;AAIK,WAAKJ,QAAL,CAAc;AAACO,QAAAA,OAAO,EAAE;AAAV,OAAd;AACJ,KA1BkB;;AAAA,SAgCnBC,mBAhCmB,GAgCIZ,CAAD,IAAO;AAC3B,UAAIa,aAAa,GAAGb,CAAC,CAACc,MAAF,CAASC,KAA7B;AACA,WAAKX,QAAL,CAAc;AAAEY,QAAAA,oBAAoB,EAAEH;AAAxB,OAAd;AACD,KAnCkB;;AAAA,SAqCnBI,QArCmB,GAqCPjB,CAAD,IAAO;AAChBA,MAAAA,CAAC,CAACkB,cAAF;AAEA,YAAMC,mBAAmB,GAAG,KAAKC,KAAL,CAAWf,MAAX,CAAkBgB,MAAlB,CACzBC,CAAD,IACEA,CAAC,CAACC,YAAF,CAAeC,WAAf,OACA,KAAKJ,KAAL,CAAWJ,oBAAX,CAAgCQ,WAAhC,EAHwB,CAA5B;;AAMA,UAAG,CAAC,KAAKJ,KAAL,CAAWJ,oBAAf,EAAoC;AAClC;AACAzB,QAAAA,KAAK,CAACU,GAAN,CAAU,YAAV,EACCC,IADD,CACMC,QAAQ,IAAI,KAAKC,QAAL,CAAc;AAACC,UAAAA,MAAM,EAAEF,QAAQ,CAACG;AAAlB,SAAd,CADlB,EAECC,KAFD,CAEOC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFd;AAGA;AACD;;AAED,WAAKJ,QAAL,CAAc;AAAEC,QAAAA,MAAM,EAAEc;AAAV,OAAd;AAEA,WAAKf,QAAL,CAAc;AAAEY,QAAAA,oBAAoB,EAAE;AAAxB,OAAd,EAnBgB,CAoBhB;AACA;AACD,KA3DkB;;AAGjB,SAAKI,KAAL,GAAa;AACXT,MAAAA,OAAO,EAAE,IADE;AAEXN,MAAAA,MAAM,EAAE,EAFG;AAGXW,MAAAA,oBAAoB,EAAE;AAHX,KAAb;AAOD;;AAGDS,EAAAA,iBAAiB,GAAE;AAEnB,SAAK1B,MAAL;AAEC;;AAWD0B,EAAAA,iBAAiB,GAAE;AACjB,SAAK1B,MAAL;AACD;;AA+BD2B,EAAAA,MAAM,GAAG;AACP,QAAG,KAAKN,KAAL,CAAWT,OAAd,EAAsB;AACpB,0BACE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,cADF;AAGD,KAJD,MAIK;AACL,0BACE;AAAA,gCACE,QAAC,YAAD;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,KAAK,EAAC,4CAFR;AAGE,UAAA,WAAW,EAAC,4CAHd;AAIE,UAAA,IAAI,EAAC,cAJP;AAKE,UAAA,GAAG,EAAE,KAAKS,KAAL,CAAWJ,oBALlB;AAME,UAAA,QAAQ,EAAE,KAAKJ,mBANjB;AAOE,UAAA,QAAQ,EAAE,KAAKK;AAPjB;AAAA;AAAA;AAAA;AAAA,gBADF,eAUE,QAAC,WAAD;AAAa,UAAA,MAAM,EAAE,KAAKG,KAAL,CAAWf;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAVF,eAWE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,gBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAeC;AACF;;AApFgC;;AAuFnC,eAAeT,UAAf","sourcesContent":["import React, { Component } from \"react\";\r\n// import OffersFilters from \"./OffersFilters\";\r\n// import TableOffers from \"./tableComponents/TableOffers\";\r\n// import Pagination from './tableComponents/Pagination'\r\n// import qs from \"querystring\";\r\nimport axios from 'axios'\r\nimport Pagination from \"./tableComponents/Pagination\";\r\nimport TableOffers from \"./tableComponents/TableOffers\";\r\nimport SearchButton from \"./SearchButton\";\r\nimport Spinner from './sharedComponents/Spinner'\r\n// import db from \"./db/db\";\r\n\r\nclass ShowOffers extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // console.log(this.props);\r\n    this.state = {\r\n      loading: true,\r\n      offers: [],\r\n      searchByNeighborhood: \"\",\r\n    };\r\n\r\n    \r\n  }\r\n\r\n\r\n  componentDidMount(){\r\n\r\n  this.getAll()\r\n\r\n  }\r\n\r\n  getAll = async function(e) {\r\n   \r\n  await axios.get('/allOffers')\r\n              .then(response => this.setState({offers: response.data}))\r\n              .catch(err => console.log(err))\r\n\r\n       this.setState({loading: false})\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getAll()\r\n  }\r\n\r\n  onChangeValueSearch = (e) => {\r\n    let currentSearch = e.target.value;\r\n    this.setState({ searchByNeighborhood: currentSearch });\r\n  };\r\n\r\n  onSearch = (e) => {\r\n    e.preventDefault();\r\n    \r\n    const currentNeighborhood = this.state.offers.filter(\r\n      (x) =>\r\n        x.neighborhood.toLowerCase() ===\r\n        this.state.searchByNeighborhood.toLowerCase()\r\n    );\r\n\r\n    if(!this.state.searchByNeighborhood){\r\n      // this.setState({offers: this.newDb})\r\n      axios.get('/allOffers')\r\n      .then(response => this.setState({offers: response.data}))\r\n      .catch(err => console.log(err))\r\n      return;\r\n    }\r\n\r\n    this.setState({ offers: currentNeighborhood });\r\n\r\n    this.setState({ searchByNeighborhood: \"\" });\r\n    // console.log(\"click search !!!\");\r\n    // console.log(this.state.searchByNeighborhood);\r\n  };\r\n\r\n  render() {\r\n    if(this.state.loading){\r\n      return(\r\n        <Spinner />\r\n      )\r\n    }else{\r\n    return (\r\n      <div>\r\n        <SearchButton\r\n          type=\"text\"\r\n          label=\"Квартал\"\r\n          placeholder=\"Квартал\"\r\n          name=\"neighborhood\"\r\n          val={this.state.searchByNeighborhood}\r\n          onChange={this.onChangeValueSearch}\r\n          onSearch={this.onSearch}\r\n        />\r\n        <TableOffers offers={this.state.offers} />\r\n        <Pagination />\r\n      </div>\r\n    );\r\n    }\r\n  }\r\n}\r\n\r\nexport default ShowOffers;\r\n"]},"metadata":{},"sourceType":"module"}