{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\SoftUni\\\\JS Web\\\\JS React\\\\MY FINAL PROJECT - REAL\\\\react-exam-brokers\\\\react-exam-brokers\\\\src\\\\components\\\\EditOffer.js\";\nimport { Component } from \"react\";\nimport OfferForm from \"./OfferForm\"; // import db from \"./db/db\";\n\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass EditOffer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      // console.log(this.state.currentOffer);\n      let {\n        currentOffer\n      } = this.state;\n      currentOffer[e.target.name] = e.target.value;\n      this.setState(prevState => {\n        return { ...prevState,\n          currentOffer\n        };\n      });\n    };\n\n    this.searchInDb = async function () {\n      let db = [];\n      await axios.get('/allOffers').then(response => db.push(response.data)).catch(err => console.log(err)); //  console.log(db)\n\n      const currentOffer = await db[0].filter(x => x._id === this.props.match.params._id)[0];\n      this.setState({\n        currentOffer\n      }); // console.log(this.state.currentOffer)\n    };\n\n    this.dltButton = async function (_id) {\n      const db = [];\n      await axios.get('/allOffers').then(response => db.push(response.data)).catch(err => console.log(err));\n      const neededOffer = await db[0].filter(x => x._id === _id)[0];\n      await axios.post('/delete', neededOffer).then(response => this.props.history.push('/show-offers/1')).catch(err => console.log(err)); // this.props.history.push('/show-offers/1')\n      // console.log(this.props);\n      // this.props.history.push(\"/\");\n    };\n\n    this.editButton = async function (_id) {\n      const db = [];\n      await axios.get('/allOffers').then(response => db.push(response.data)).catch(err => console.log(err)); // const neededOffer = await db[0].filter((x) => x._id === _id)[0];\n      // delete neededOffer._id;\n\n      await axios.post(\"/edit-offer\", this.state.currentOffer, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => this.props.history.push('/show-offers/1')).catch(err => console.log(err)); // let index = db.indexOf(neededOffer);\n      // this.setState({ currentOffer: neededOffer });\n      // db.splice(index, 1, this.state.currentOffer);\n      // this.props.history.push(\"/show-offers/1\");\n      // console.log(db);\n    };\n\n    this.state = {\n      currentOffer: {}\n    };\n  }\n\n  componentDidMount() {\n    this.searchInDb();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(OfferForm, {\n        changeFn: this.onChange,\n        offer: this.state.currentOffer || {},\n        deleteOffer: this.dltButton.bind(this) // deleteOffer={this.dltButton.bind(this)}\n        ,\n        editOffer: this.editButton.bind(this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default EditOffer;","map":{"version":3,"sources":["C:/Users/user/Desktop/SoftUni/JS Web/JS React/MY FINAL PROJECT - REAL/react-exam-brokers/react-exam-brokers/src/components/EditOffer.js"],"names":["Component","OfferForm","axios","EditOffer","constructor","props","onChange","e","currentOffer","state","target","name","value","setState","prevState","searchInDb","db","get","then","response","push","data","catch","err","console","log","filter","x","_id","match","params","dltButton","neededOffer","post","history","editButton","headers","componentDidMount","render","bind"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\nimport OfferForm from \"./OfferForm\";\r\n// import db from \"./db/db\";\r\nimport axios from \"axios\";\r\n\r\nclass EditOffer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentOffer: {}\r\n    };\r\n  }\r\n \r\n\r\n  componentDidMount() {\r\n   \r\n\r\n    this.searchInDb();\r\n  }\r\n\r\n\r\n\r\n  onChange = (e) => {\r\n    // console.log(this.state.currentOffer);\r\n    \r\n    let { currentOffer } = this.state;\r\n    currentOffer[e.target.name] = e.target.value;\r\n    \r\n\r\n    this.setState((prevState) => {\r\n      \r\n      return { ...prevState, currentOffer };\r\n    });\r\n  };\r\n\r\n\r\n\r\n  searchInDb = async function() {\r\n    let db = []; \r\n    await axios.get('/allOffers')\r\n     .then(response => db.push(response.data))\r\n     .catch(err => console.log(err))\r\n    //  console.log(db)\r\n\r\n    const currentOffer = await db[0].filter(\r\n      (x) => x._id === this.props.match.params._id\r\n    )[0];\r\n    this.setState({ currentOffer });\r\n\r\n    // console.log(this.state.currentOffer)\r\n    \r\n  };\r\n\r\n  // deleteOffer(offer){\r\n  //   this.props.deleteOffer(offer._id)\r\n  // }\r\n\r\n  dltButton = async function (_id){\r\n    const db = [];\r\n    await axios.get('/allOffers')\r\n     .then(response => db.push(response.data))\r\n     .catch(err => console.log(err))\r\n\r\n\r\n    const neededOffer = await db[0].filter((x) => x._id === _id)[0];\r\n    \r\n    \r\n   await axios.post('/delete', neededOffer)\r\n          .then(response => this.props.history.push('/show-offers/1'))\r\n          .catch(err => console.log(err))\r\n          // this.props.history.push('/show-offers/1')\r\n\r\n    // console.log(this.props);\r\n    // this.props.history.push(\"/\");\r\n  };\r\n\r\n  editButton = async function (_id) {\r\n    const db = [];\r\n    await axios.get('/allOffers')\r\n     .then(response => db.push(response.data))\r\n     .catch(err => console.log(err))\r\n     \r\n\r\n\r\n    // const neededOffer = await db[0].filter((x) => x._id === _id)[0];\r\n    \r\n    \r\n    // delete neededOffer._id;\r\n   \r\n   await axios\r\n      .post(\"/edit-offer\", this.state.currentOffer, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n      .then((response) => this.props.history.push('/show-offers/1'))\r\n      .catch(err => console.log(err))\r\n\r\n    // let index = db.indexOf(neededOffer);\r\n\r\n    // this.setState({ currentOffer: neededOffer });\r\n\r\n    // db.splice(index, 1, this.state.currentOffer);\r\n    // this.props.history.push(\"/show-offers/1\");\r\n    // console.log(db);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <OfferForm\r\n          changeFn={this.onChange}\r\n          offer={this.state.currentOffer || {}}\r\n          deleteOffer={this.dltButton.bind(this)}\r\n          // deleteOffer={this.dltButton.bind(this)}\r\n          editOffer={this.editButton.bind(this)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditOffer;\r\n"]},"metadata":{},"sourceType":"module"}